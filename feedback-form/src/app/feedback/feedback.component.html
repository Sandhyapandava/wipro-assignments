<div class="feedback-wrapper">

  <!-- Show form only if not submitted -->
  <mat-card class="feedback-card" *ngIf="!submitted">
    <mat-card-header>
      <mat-card-title></mat-card-title> <br>
      
      <mat-card-subtitle>Weâ€™d love to hear from you</mat-card-subtitle><br>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="feedbackForm" (ngSubmit)="onSubmit()">
        
        <!-- Name -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" placeholder="Enter your name">
          <mat-error *ngIf="f['name'].touched && f['name'].invalid">
            Name is required (min 2 characters)
          </mat-error>
        </mat-form-field>

        <!-- Email -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" placeholder="Enter your email">
          <mat-error *ngIf="f['email'].touched && f['email'].invalid">
            Please enter a valid email
          </mat-error>
        </mat-form-field>

        <!-- Subject -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Subject</mat-label>
          <input matInput formControlName="subject" maxlength="{{maxSubject}}" placeholder="Max {{maxSubject}} characters">
          <mat-hint align="end">{{f['subject'].value?.length || 0}} / {{maxSubject}}</mat-hint>
          <mat-error *ngIf="f['subject'].touched && f['subject'].invalid">
            Subject is required (max {{maxSubject}} characters)
          </mat-error>
        </mat-form-field>

        <!-- Comments -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Comments / Issues</mat-label>
          <textarea matInput formControlName="comments" rows="4" maxlength="{{maxComments}}" placeholder="Tell us more..."></textarea>
          <mat-hint align="end">{{f['comments'].value?.length || 0}} / {{maxComments}}</mat-hint>
          <mat-error *ngIf="f['comments'].touched && f['comments'].invalid">
            Comments are required (max {{maxComments}} characters)
          </mat-error>
        </mat-form-field>

        <!-- Actions -->
        <div class="actions">
          <button mat-raised-button color="primary" type="submit" [disabled]="feedbackForm.invalid">Submit</button>
          <button mat-stroked-button type="button" (click)="reset()">Reset</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <!-- Show thank-you message after submission -->
  <div *ngIf="submitted" class="thankyou-message">
    <mat-icon color="primary">check_circle</mat-icon>
    <h2>Thank you for your feedback!</h2>
    <p>We will get back to you shortly.</p>
    <button mat-raised-button color="accent" (click)="reset()">Submit Another Response</button>
  </div>

</div>
